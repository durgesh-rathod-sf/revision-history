/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x262bf4}from'ckeditor5/src/core';import{ListView as _0x386f61,ListItemView as _0x2df6db,ButtonView as _0x22188f,createDropdown as _0x445656}from'ckeditor5/src/ui';import _0xe1a78e from'../../revisiontracker';import ot from'./revisionhistorysaverevisionformview';import _0x5ecd6b from'../../../theme/icons/revision-history.svg';export default class l extends _0x262bf4{static get['pluginName'](){return'RevisionHistoryUI';}static get['requires'](){return[_0xe1a78e];}['init'](){const _0x1c5640=this['editor'],t=_0x1c5640['t'],_0x1bf492=_0x1c5640['plugins']['get']('RevisionTracker');_0x1c5640['ui']['componentFactory']['add']('revisionHistory',_0x31eca0=>{const _0x2acdbb=_0x445656(_0x31eca0),_0x401f91=_0x2acdbb['panelView']['children'],_0x348502=new _0x386f61(_0x31eca0),_0x922abf=new _0x2df6db(_0x31eca0),_0xe91fa7=new _0x22188f(_0x31eca0),_0x845341=new _0x2df6db(_0x31eca0),_0x56b0e4=new _0x22188f(_0x31eca0),_0x45d6ce=new ot(_0x31eca0);function _0x4a5dd9(){_0x401f91['length']&&_0x401f91['remove'](0x0),_0x401f91['add'](_0x348502);}function _0x540ab5(){_0x2acdbb['isOpen']=!0x1,_0x1c5640['editing']['view']['focus']();}return _0x2acdbb['bind']('isEnabled')['to'](_0x1bf492,'isReady',_0x1bf492,'isEnabled',_0x1c5640,'isReadOnly',(_0x4c8811,_0x2b8770,_0x3e9fc8)=>_0x4c8811&&_0x2b8770&&!_0x3e9fc8),_0x2acdbb['buttonView']['set']({'icon':_0x5ecd6b,'label':t('Revision\x20history'),'tooltip':!0x0}),_0xe91fa7['set']({'label':t('Save\x20current\x20revision'),'withText':!0x0}),_0xe91fa7['bind']('isEnabled')['to'](_0x1bf492,'isReady',_0x1bf492,'isEnabled',_0x1c5640,'isReadOnly',(_0x29b5e7,_0x47f3dc,_0x1cd559)=>_0x29b5e7&&_0x47f3dc&&!_0x1cd559),_0xe91fa7['on']('execute',()=>function(){_0x401f91['length']&&_0x401f91['remove'](0x0),(_0x45d6ce['reset'](),_0x401f91['add'](_0x45d6ce),_0x45d6ce['focus']());}()),_0x56b0e4['set']({'label':t('Open\x20revision\x20history'),'withText':!0x0}),_0x56b0e4['bind']('isEnabled')['to'](_0x1bf492,'isReady',_0x1c5640,'isReadOnly',(_0x22f363,_0x3407ec)=>_0x22f363&&!_0x3407ec),_0x56b0e4['on']('execute',()=>{_0x1c5640['config']['get']('revisionHistory')['showRevisionViewerCallback'](),_0x540ab5();}),_0x922abf['children']['add'](_0xe91fa7),_0x845341['children']['add'](_0x56b0e4),_0x348502['items']['addMany']([_0x922abf,_0x845341]),_0x2acdbb['on']('change:isOpen',()=>_0x4a5dd9()),_0x45d6ce['saveButtonView']['bind']('isEnabled')['to'](_0x1bf492,'isReady',_0x1bf492,'isEnabled',_0x1c5640,'isReadOnly',(_0x2bba30,_0x178b85,_0x3bbc33)=>_0x2bba30&&_0x178b85&&!_0x3bbc33),_0x45d6ce['on']('submit',()=>(_0x1c5640['plugins']['get'](_0xe1a78e)['saveRevision']({'name':_0x45d6ce['revisionName']}),void _0x540ab5())),_0x45d6ce['on']('cancel',()=>_0x4a5dd9()),_0x45d6ce['render'](),_0x4a5dd9(),_0x2acdbb;});}}