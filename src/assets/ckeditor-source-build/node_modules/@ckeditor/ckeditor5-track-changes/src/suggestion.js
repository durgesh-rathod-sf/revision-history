/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x23c8=['decorate','start','markers','hasComments','attributes','head','map','getRange','getFirstRange','nodeAfter','discard','subType','delete','length','split','suggestion:','from','clear','push','getItems','getAllAdjacentSuggestions','getContainedElement','isInContent','createdAt','_model','nodeBefore','commentThread','filter','getMarkers','getMarkerNames','type','onAttributesChange','_markerNames','add','end','_onAttributesChange','_onAccept','set','isMultiRange','previous','removeMarkers','data','author','addMarker','change','addRange','accept','removeMarker','getRanges','toJSON','_saved','removeAttribute','setAttribute','_onDiscard','next','getFirstMarker'];(function(_0x1d3563,_0x23c811){const _0x544bf7=function(_0x51c79b){while(--_0x51c79b){_0x1d3563['push'](_0x1d3563['shift']());}};_0x544bf7(++_0x23c811);}(_0x23c8,0xde));const _0x544b=function(_0x1d3563,_0x23c811){_0x1d3563=_0x1d3563-0x0;let _0x544bf7=_0x23c8[_0x1d3563];return _0x544bf7;};import{Element as _0x50db9b}from'ckeditor5/src/engine';import{ObservableMixin as _0x1d3549,mix as _0x2e5b20,uid as _0x57ae7b}from'ckeditor5/src/utils';import{cloneDeep as _0x5e0a12,isEqual as _0x1b1512,set as _0x304ede,unset as _0x55473e}from'lodash-es';export default class o{constructor(_0x4fa01f,_0x4fd520){this['id']=_0x4fd520['id'],this[_0x544b('0x20')]=_0x4fd520[_0x544b('0x20')],this[_0x544b('0xd')]=_0x4fd520['subType']||null,this[_0x544b('0x2c')]=_0x4fd520[_0x544b('0x2c')],this['data']=null,this[_0x544b('0x1a')]=_0x4fa01f,this['_onAccept']=_0x4fd520['onAccept'],this['_onDiscard']=_0x4fd520['onDiscard'],this[_0x544b('0x25')]=_0x4fd520[_0x544b('0x21')],this[_0x544b('0x22')]=new Set(),this['set'](_0x544b('0x19'),null),this[_0x544b('0x27')](_0x544b('0x6'),_0x4fd520[_0x544b('0x6')]||{}),this[_0x544b('0x27')](_0x544b('0x29'),null),this['set'](_0x544b('0x0'),null),this['set'](_0x544b('0x1c'),null),this[_0x544b('0x27')](_0x544b('0x34'),!0x1),this[_0x544b('0x2')](_0x544b('0x30')),this[_0x544b('0x2')](_0x544b('0xc'));}get[_0x544b('0x7')](){let _0x4ca845=this;for(;_0x4ca845[_0x544b('0x29')];)_0x4ca845=_0x4ca845['previous'];return _0x4ca845;}get[_0x544b('0x5')](){return!!this[_0x544b('0x1c')]&&this[_0x544b('0x1c')][_0x544b('0xf')]>0x0;}get[_0x544b('0x28')](){if(0x0==this[_0x544b('0x22')]['size'])return!0x1;return 0x6==Array[_0x544b('0x12')](this[_0x544b('0x22')])[0x0][_0x544b('0x10')](':')['length'];}get[_0x544b('0x18')](){return null!==this[_0x544b('0x1')]();}['addMarkerName'](_0xd89279){this[_0x544b('0x22')][_0x544b('0x23')](_0xd89279);}['getMarkerNames'](){return Array[_0x544b('0x12')](this['_markerNames']);}[_0x544b('0x1e')](){return this[_0x544b('0x1f')]()[_0x544b('0x8')](_0x25ab97=>this[_0x544b('0x1a')][_0x544b('0x4')]['get'](_0x25ab97))[_0x544b('0x1d')](_0x573b43=>_0x573b43);}[_0x544b('0x1')](){return this['getMarkers']()[0x0]||null;}[_0x544b('0x2a')](){this['_model']['change'](_0x2dc83a=>{for(const _0x225566 of this['getMarkers']())_0x2dc83a[_0x544b('0x31')](_0x225566);}),this[_0x544b('0x22')][_0x544b('0x13')]();}[_0x544b('0x31')](_0x303126){this[_0x544b('0x1a')][_0x544b('0x2e')](_0x5c7092=>{_0x5c7092[_0x544b('0x31')](_0x303126);}),this['_markerNames'][_0x544b('0xe')](_0x303126);}[_0x544b('0x2f')](_0x2d7a63){const _0x13f085=_0x544b('0x11')+this[_0x544b('0x20')]+':'+this[_0x544b('0xd')]+':'+this['id']+':'+this['author']['id']+':'+o['getMultiRangeId']();this['addMarkerName'](_0x13f085),this[_0x544b('0x1a')][_0x544b('0x2e')](_0x46386d=>{_0x46386d[_0x544b('0x2d')](_0x13f085,{'range':_0x2d7a63,'usingOperation':!0x0,'affectsData':!0x0});});}['isIntersectingWithRange'](_0x4bc4ec){for(const _0x584e55 of this[_0x544b('0x32')]())if(_0x584e55['isIntersecting'](_0x4bc4ec))return!0x0;return!0x1;}[_0x544b('0x32')](){return this[_0x544b('0x1e')]()['map'](_0x5c7cc4=>_0x5c7cc4[_0x544b('0x9')]());}['getItems'](){return this[_0x544b('0x32')]()['reduce']((_0x1c7ce9,_0x58dfa1)=>[..._0x1c7ce9,..._0x58dfa1[_0x544b('0x15')]()],[]);}[_0x544b('0xa')](){return this[_0x544b('0x1')]()[_0x544b('0x9')]();}[_0x544b('0x17')](){const _0x23f6de=this['getRanges']();if(0x1!=_0x23f6de[_0x544b('0xf')])return null;const _0x5ec041=_0x23f6de[0x0],_0x1ab7b0=_0x5ec041[_0x544b('0x3')][_0x544b('0xb')],_0x5c2aa7=_0x5ec041[_0x544b('0x24')][_0x544b('0x1b')];return _0x1ab7b0 instanceof _0x50db9b?_0x1ab7b0!=_0x5c2aa7?null:_0x1ab7b0:null;}['accept'](){this[_0x544b('0x26')](this[_0x544b('0x32')](),this[_0x544b('0x2b')],this['attributes']),this[_0x544b('0x2a')]();}[_0x544b('0xc')](){this[_0x544b('0x37')](this['getRanges'](),this[_0x544b('0x2b')],this[_0x544b('0x6')]),this['removeMarkers']();}[_0x544b('0x16')](){const _0x35661b=[];let _0x542a56=this['head'];for(;_0x542a56;)_0x35661b[_0x544b('0x14')](_0x542a56),_0x542a56=_0x542a56[_0x544b('0x0')];return _0x35661b;}[_0x544b('0x36')](_0x455284,_0x26d41a){const _0x3e8efe=_0x5e0a12(this[_0x544b('0x6')]);_0x304ede(_0x3e8efe,_0x455284,_0x26d41a),_0x1b1512(_0x3e8efe,this[_0x544b('0x6')])||(this[_0x544b('0x6')]=_0x3e8efe,this[_0x544b('0x25')](_0x3e8efe));}[_0x544b('0x35')](_0x2bef18){const _0xf70c01=_0x5e0a12(this[_0x544b('0x6')]);_0x55473e(_0xf70c01,_0x2bef18),_0x1b1512(_0xf70c01,this['attributes'])||(this[_0x544b('0x6')]=_0xf70c01,this[_0x544b('0x25')](this[_0x544b('0x6')]));}[_0x544b('0x33')](){return{'id':this['id'],'type':this[_0x544b('0xd')]?this[_0x544b('0x20')]+':'+this[_0x544b('0xd')]:this[_0x544b('0x20')],'authorId':this[_0x544b('0x2c')]['id'],'createdAt':this[_0x544b('0x19')],'hasComments':this[_0x544b('0x5')],'data':this['data'],'attributes':this[_0x544b('0x6')]};}static['getMultiRangeId'](){return _0x57ae7b()['substr'](0x1,0x5);}}_0x2e5b20(o,_0x1d3549);