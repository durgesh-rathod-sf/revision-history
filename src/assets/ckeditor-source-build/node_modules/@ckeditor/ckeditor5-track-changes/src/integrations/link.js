/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x34f7bf}from'ckeditor5/src/core';import{findAttributeRange as _0x531d6f}from'ckeditor5/src/typing';import{getRangesWithAttribute as Rt}from'./utils';export default class Z extends _0x34f7bf{['afterInit'](){const _0x5f590a=this['editor'];if(!_0x5f590a['plugins']['has']('LinkEditing'))return;const _0x26cc9e=_0x5f590a['plugins']['get']('TrackChangesEditing');_0x26cc9e['enableCommand']('link',(_0x37de3d,_0xd53914)=>{const _0x291084=_0x5f590a['model']['document']['selection'];let _0x2e3d8b=[];if(_0x291084['isCollapsed']){if(!_0x291084['hasAttribute']('linkHref'))return void _0x37de3d(_0xd53914);{const _0x270ee8=_0x531d6f(_0x291084['getFirstPosition'](),'linkHref',_0x291084['getAttribute']('linkHref'),_0x5f590a['model']);_0x2e3d8b=[_0x270ee8];}}else _0x2e3d8b=Array['from'](_0x291084['getRanges']());_0x5f590a['model']['change'](()=>{for(const _0x3bf0b6 of _0x2e3d8b)_0x26cc9e['markInlineFormat'](_0x3bf0b6,{'commandName':'link','commandParams':[_0xd53914]});});}),_0x26cc9e['enableCommand']('unlink',()=>{const _0x2f9f5c=this['editor']['model'],_0x308522=_0x2f9f5c['document']['selection'];_0x2f9f5c['change'](()=>{let _0x573fd6=[];if(_0x308522['isCollapsed'])_0x573fd6=[_0x531d6f(_0x308522['getFirstPosition'](),'linkHref',_0x308522['getAttribute']('linkHref'),_0x5f590a['model'])];else _0x573fd6=Rt('linkHref',_0x308522['getFirstRange'](),_0x5f590a['model']);for(const _0x5dde3b of _0x573fd6)_0x26cc9e['markInlineFormat'](_0x5dde3b,{'commandName':'unlink','commandParams':[]});});}),_0x26cc9e['_descriptionFactory']['registerDescriptionCallback'](_0x21cb99=>{const {data:_0x366666}=_0x21cb99,{t:t}=_0x5f590a['locale'];if(_0x366666){if('link'==_0x366666['commandName'])return{'type':'format','content':t('*Set\x20link:*\x20%0','\x22'+_0x366666['commandParams'][0x0]+'\x22')};return'unlink'==_0x366666['commandName']?{'type':'format','content':t('*Remove\x20link*')}:void 0x0;}});}}