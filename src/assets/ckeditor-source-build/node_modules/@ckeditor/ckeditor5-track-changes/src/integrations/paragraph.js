/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x21352a}from'ckeditor5/src/core';import{getElementsAffectedByListItemRename as _0x5225a4}from'./utils';export default class et extends _0x21352a{['afterInit'](){const _0x5bae99=this['editor'];if(!_0x5bae99['plugins']['has']('Paragraph'))return;const {t:t}=_0x5bae99['locale'],_0x4b364b=_0x5bae99['plugins']['get']('TrackChangesEditing');_0x4b364b['_descriptionFactory']['registerElementLabel']('paragraph',_0x53beda=>t({'string':'paragraph','plural':'%0\x20paragraphs','id':'ELEMENT_PARAGRAPH'},_0x53beda)),_0x4b364b['enableCommand']('paragraph',(_0x13cd49,_0x11ef52={})=>{const _0x210516=_0x5bae99['model']['document'],_0x3efe9a=_0x11ef52['selection']||_0x210516['selection'],_0x2150d4=Array['from'](_0x3efe9a['getSelectedBlocks']())['filter'](_0x439d9f=>function(_0x1609b0,_0x28cf51){return _0x28cf51['checkChild'](_0x1609b0['parent'],'paragraph')&&!_0x28cf51['isObject'](_0x1609b0)&&'paragraph'!=_0x1609b0['name'];}(_0x439d9f,this['editor']['model']['schema']));_0x5bae99['model']['change'](()=>{for(const _0x53c6fd of _0x2150d4)_0x4b364b['markBlockFormat'](_0x53c6fd,{'commandName':'paragraph','commandParams':[],'formatGroupId':'blockName'},_0x5225a4(_0x53c6fd));});}),_0x4b364b['_descriptionFactory']['registerDescriptionCallback'](_0x15c56f=>{const {data:_0x4e22a1}=_0x15c56f;if(_0x4e22a1&&'paragraph'==_0x4e22a1['commandName'])return{'type':'format','content':t('*Change\x20to:*\x20%0',t({'string':'paragraph','plural':'%0\x20paragraphs','id':'ELEMENT_PARAGRAPH'}))};}),_0x4b364b['enableCommand']('insertParagraph'),_0x5bae99['editing']['downcastDispatcher']['on']('addMarker:suggestion:insertion',tr(_0x5bae99),{'priority':'highest'}),_0x5bae99['data']['downcastDispatcher']['on']('addMarker:suggestion:insertion',(_0x58ffc5,_0x4d63d3,_0x20f434)=>{_0x20f434['options']['showSuggestionHighlights']&&tr(_0x5bae99,{'showActiveMarker':!0x1})(_0x58ffc5,_0x4d63d3,_0x20f434);},{'priority':'highest'});const _0x3919ef=_0x4b364b['_descriptionFactory'];_0x3919ef['registerDescriptionCallback'](_0x3c6022=>{if('insertion'!==_0x3c6022['type'])return;const {start:_0x4387de,end:_0x19e0dc}=_0x3c6022['getFirstRange']();if(!_0x4387de['isTouching'](_0x19e0dc)||!_0x4387de['nodeAfter'])return;const _0x313038=_0x5bae99['model']['schema'],_0x2852c3=_0x4387de['nodeAfter'];return _0x313038['isBlock'](_0x2852c3)&&!_0x313038['isLimit'](_0x2852c3)&&_0x313038['checkChild'](_0x2852c3,'$text')?{'type':'insertion','content':t('*Insert:*\x20%0',_0x3919ef['getItemLabel'](_0x2852c3['name'],0x1))}:void 0x0;});}}function tr(_0x15f0db,{showActiveMarker:_0x59bf13=!0x0}={}){return(_0x4abb92,_0x4db541,_0x332b25)=>{const _0x236266=_0x15f0db['plugins']['get']('TrackChangesEditing'),_0x4f7c59=_0x4db541['markerRange']['start'],_0x7ca16d=_0x4db541['markerRange']['end'],_0x3a6e20=_0x15f0db['model']['schema'];if(!_0x4f7c59['isTouching'](_0x7ca16d)||!_0x4f7c59['nodeAfter'])return;const _0x47a7db=_0x4f7c59['nodeAfter'];if(_0x3a6e20['isBlock'](_0x47a7db)&&!_0x3a6e20['isLimit'](_0x47a7db)&&_0x3a6e20['checkChild'](_0x47a7db,'$text')){if(!_0x332b25['consumable']['consume'](_0x4db541['markerRange'],_0x4abb92['name']))return;const _0x54bde3=_0x332b25['writer']['createUIElement']('span',{'class':'ck-suggestion-marker-split'}),_0x418ebb=_0x332b25['mapper']['toViewPosition'](_0x7ca16d);_0x59bf13&&_0x236266['activeMarkers']['includes'](_0x4db541['markerName'])&&_0x332b25['writer']['addClass']('ck-suggestion-marker--active',_0x54bde3),_0x332b25['writer']['insert'](_0x418ebb,_0x54bde3),_0x332b25['mapper']['bindElementToMarker'](_0x54bde3,_0x4db541['markerName']);}};}