/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x494018}from'ckeditor5/src/core';import{TreeWalker as Qt}from'ckeditor5/src/engine';export default class F extends _0x494018{['afterInit'](){const _0x1e7e99=this['editor'],{t:t}=_0x1e7e99['locale'];if(!_0x1e7e99['plugins']['has']('BlockQuoteEditing'))return;const _0x3187a1=_0x1e7e99['plugins']['get']('TrackChangesEditing'),_0x513b34=this['editor']['commands']['get']('blockQuote');_0x3187a1['enableCommand']('blockQuote',(_0x1b5e14,_0x44420d={})=>{const _0x5c6125=this['editor']['model']['document']['selection'],_0x4e24c9=_0x44420d&&void 0x0!==_0x44420d['forceValue']?_0x44420d['forceValue']:!_0x513b34['value'];let _0x45ad50=[];if(_0x4e24c9){const _0xa0be2f=Array['from'](_0x5c6125['getSelectedBlocks']())['filter'](_0x1d72b2=>Bt(_0x1d72b2)||function(_0x19f51f,_0x4e76cc){const _0x10c12f=_0x4e76cc['checkChild'](_0x19f51f['parent'],'blockQuote'),_0x54acc1=_0x4e76cc['checkChild'](['$root','blockQuote'],_0x19f51f);return _0x10c12f&&_0x54acc1;}(_0x1d72b2,this['editor']['model']['schema']));_0x45ad50=Lt(_0xa0be2f,_0x1e7e99['model']);}else{const _0x307128=Array['from'](_0x5c6125['getSelectedBlocks']())['filter'](_0x192374=>Bt(_0x192374));_0x45ad50=Lt(_0x307128,_0x1e7e99['model']);}_0x1e7e99['model']['change'](()=>{for(const _0x478279 of _0x45ad50)_0x3187a1['markBlockFormat'](_0x478279,{'commandName':'blockQuote','commandParams':[{'forceValue':_0x4e24c9}]});});}),_0x3187a1['_descriptionFactory']['registerDescriptionCallback'](_0xc79c94=>{const {data:_0x38f446}=_0xc79c94;if(_0x38f446&&'blockQuote'==_0x38f446['commandName']){const _0xd91bf2=t({'string':'block\x20quote','id':'ELEMENT_BLOCK_QUOTE'});return _0x38f446['commandParams'][0x0]['forceValue']?{'type':'format','content':t('*Format:*\x20%0',_0xd91bf2)}:{'type':'format','content':t('*Remove\x20format:*\x20%0',_0xd91bf2)};}});}}function Bt(_0x4cd688){return'blockQuote'==_0x4cd688['parent']['name'];}function Lt(_0x49358c,_0x94d056){let _0x45774e,_0x423834=0x0;const _0x59a61e=[],_0x38f350=_0x94d056['schema'];for(;_0x423834<_0x49358c['length'];){const _0x4d9219=_0x49358c[_0x423834],_0x169b97=_0x49358c[_0x423834+0x1];_0x45774e||(_0x45774e=_0x94d056['createPositionBefore'](_0x4d9219)),Kt(_0x94d056,_0x4d9219,_0x169b97)||(_0x59a61e['push'](_0x94d056['createRange'](_0x45774e,_0x38f350['isObject'](_0x4d9219)?_0x94d056['createPositionAfter'](_0x4d9219):_0x94d056['createPositionAt'](_0x4d9219,'end'))),_0x45774e=null),_0x423834++;}return _0x59a61e;}function Kt(_0xbd39a9,_0x3d7dc2,_0x30a15c){if(!_0x30a15c)return!0x1;const _0x2a839f=_0xbd39a9['createPositionAfter'](_0x3d7dc2),_0x353a46=_0xbd39a9['createPositionBefore'](_0x30a15c),_0x580e04=new Qt({'boundaries':_0xbd39a9['createRange'](_0x2a839f,_0x353a46)});for(const _0x39bfaa of _0x580e04)if('text'==_0x39bfaa['type']||_0xbd39a9['schema']['isLimit'](_0x39bfaa['item']))return!0x1;return!0x0;}